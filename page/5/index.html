<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    
<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>


<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />

<meta name="theme-color" content="#f8f5ec" />
<meta name="msapplication-navbutton-color" content="#f8f5ec">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="#f8f5ec">



  <meta name="description" content="iOS developer"/>




  <meta name="keywords" content="任玉祥,iOS,developer,Android,html,开发,Apple,Objective-C,Swift,JAVA" />










  <link rel="alternate" href="/atom.xml" title="任玉祥">




  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=2.6.0" />



<link rel="canonical" href="https://yuxiang.ren/page/5/"/>


<link rel="stylesheet" type="text/css" href="/css/style.css?v=2.6.0" />



  <link rel="stylesheet" type="text/css" href="/lib/fancybox/jquery.fancybox.css" />




  
  <script id="baidu_analytics">
    var _hmt = _hmt || [];
    (function() {
      var hm = document.createElement("script");
      hm.src = "https://hm.baidu.com/hm.js?e8f9e28039f9f75405d07e7e7bbad3b6";
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(hm, s);
    })();
  </script>




  <script id="baidu_push">
(function(){
    var bp = document.createElement('script');
    var curProtocol = window.location.protocol.split(':')[0];
    if (curProtocol === 'https') {
        bp.src = 'https://zz.bdstatic.com/linksubmit/push.js';
    }
    else {
        bp.src = 'http://push.zhanzhang.baidu.com/push.js';
    }
    var s = document.getElementsByTagName("script")[0];
    s.parentNode.insertBefore(bp, s);
})();
</script>









    <title> 任玉祥 </title>
  </head>

  <body><div id="mobile-navbar" class="mobile-navbar">
  <div class="mobile-header-logo">
    <a href="/." class="logo">任玉祥</a>
  </div>
  <div class="mobile-navbar-icon">
    <span></span>
    <span></span>
    <span></span>
  </div>
</div>

<nav id="mobile-menu" class="mobile-menu slideout-menu">
  <ul class="mobile-menu-list">
    
      <a href="/">
        <li class="mobile-menu-item">
          
          
            首页
          
        </li>
      </a>
    
      <a href="/archive/">
        <li class="mobile-menu-item">
          
          
            归档
          
        </li>
      </a>
    
      <a href="/tags/">
        <li class="mobile-menu-item">
          
          
            标签
          
        </li>
      </a>
    
      <a href="/categories/">
        <li class="mobile-menu-item">
          
          
            分类
          
        </li>
      </a>
    
      <a href="/about/">
        <li class="mobile-menu-item">
          
          
            关于
          
        </li>
      </a>
    
      <a href="/history/">
        <li class="mobile-menu-item">
          
          
            历史
          
        </li>
      </a>
    
  </ul>
</nav>

    <div class="container" id="mobile-panel">
      <header id="header" class="header"><div class="logo-wrapper">
  <a href="/." class="logo">任玉祥</a>
</div>

<nav class="site-navbar">
  
    <ul id="menu" class="menu">
      
        <li class="menu-item">
          <a class="menu-item-link" href="/">
            
            
              首页
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/archive/">
            
            
              归档
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/tags/">
            
            
              标签
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/categories/">
            
            
              分类
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/about/">
            
            
              关于
            
          </a>
        </li>
      
        <li class="menu-item">
          <a class="menu-item-link" href="/history/">
            
            
              历史
            
          </a>
        </li>
      
    </ul>
  
</nav>

      </header>

      <main id="main" class="main">
        <div class="content-wrapper">
          <div id="content" class="content">
            
  <section id="posts" class="posts">
    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/03/21/利用pods给你的程序添加第三方库/">利用pods给你的程序添加第三方库</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-03-21
        </span>
        
          <div class="post-category">
            
              <a href="/category/教程/">教程</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <h2 id="CocoaPods的安装"><a href="#CocoaPods的安装" class="headerlink" title="CocoaPods的安装"></a>CocoaPods的安装</h2><ul>
<li>打开Terminal执行:<br><code>$ sudo gem install cocoapods</code></li>
<li><p>执行完这句如果报告以下错误：</p>
<pre><code>ERROR: Could not find a valid gem &apos;cocoapods&apos; (&gt;= 0), here is why:
Unable to download data from https://rubygems.org/ - Errno::ETIMEDOUT: Operation timed out - connect(2) (https://rubygems.org/latest_specs.4.8.gz)
ERROR: Possible alternatives: cocoapods
</code></pre></li>
</ul>
<ul>
<li>这是因为ruby的软件源rubygems.org因为使用亚马逊的云服务，被我天朝屏蔽了，需要更新一下ruby的源，过程如下：</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ gem sources -l (查看当前ruby的源)</div><div class="line">$ gem sources --remove https://rubygems.org/</div><div class="line">$ gem sources -a https://ruby.taobao.org/</div><div class="line">$ gem sources -l</div></pre></td></tr></table></figure>
<ul>
<li>如果gem太老，可以尝试用如下命令升级gem<br>  <code>$ sudo gem update --system</code></li>
<li>升级成功后会提示:<strong>RubyGems system software updated</strong></li>
<li>然后重新执行安装下载命令:<br><code>$ sudo gem install cocoapods</code></li>
<li>接下来进行安装，执行：:<br><code>$ pod setup</code></li>
<li>Terminal会停留在 Setting up CocoaPods master repo 这个状态一段时间,是因为要进行下载安装,而且目录比较大,需要耐心等待一下.如果想加快速度,可使用cocoapods的镜像索引.</li>
<li>至此,cocoapods已经成功</li>
</ul>
<h2 id="利用cocoapods给你的程序添加第三方库"><a href="#利用cocoapods给你的程序添加第三方库" class="headerlink" title="利用cocoapods给你的程序添加第三方库"></a>利用cocoapods给你的程序添加第三方库</h2><ul>
<li>打开Terminal,cd到你程序目录</li>
<li>创建<strong>Podfile</strong>文件(一定要创建在跟.xcodeproj同级的目录下):<br><code>$ touch Podfile</code></li>
<li>以安装AFN为例:<br><code>$ pod search AFNetWorking</code></li>
<li><p>找到<strong>-&gt; AFNetworking</strong>,如下显示,复制<code>pod &#39;AFNetworking&#39;, &#39;~&gt; 3.0.4&#39;</code></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-&gt; AFNetworking (3.0.4)</div><div class="line">A delightful iOS and OS X networking framework.</div><div class="line">pod &apos;AFNetworking&apos;, &apos;~&gt; 3.0.4&apos;</div><div class="line">- Homepage: https://github.com/AFNetworking/AFNetworking</div><div class="line">- Source:   https://github.com/AFNetworking/AFNetworking.git</div></pre></td></tr></table></figure>
</li>
<li><p>编辑Podfile文件,推荐使用<code>vi</code>命令或Xcode编辑。不建议其他编辑器编辑，不然后面更新pods会有警告的。Terminal命令 :<br>  <code>$ vim Podfile</code></p>
</li>
<li><p>将下面代码粘进去,然后保存退出 ,<code>#</code>为注释</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">use_frameworks! #用于swift</div><div class="line">platform :ios, &apos;8.0&apos; # 支持的ios版本</div><div class="line">#下面放需要导入的第三方库的名字</div><div class="line">pod &apos;AFNetworking&apos;, &apos;~&gt; 3.0.4&apos;</div></pre></td></tr></table></figure>
</li>
<li><p>安装:<br><code>pod install --verbose --no-repo-update</code></p>
</li>
<li>安装成功后项目文件夹里会出现<code>.xcwoekspace</code>的文件.以后只要写代码就打开xcworkspace这个文件写就好了。 打开之前的那个xocdeproj写的话会出现问题。</li>
<li>新建的项目添加的话 会遇到搜索不到头文件。。需要配置点东西<br>  点击项目-&gt;Build-&gt;Settings,搜索<code>header</code>,找到<code>User Header Search Patchs</code>,添加参数<strong>${SRCROOT}</strong>并将后边的属性改为<strong>recursive</strong>。</li>
<li>或者通过<code>#import &lt;&gt;</code>导入</li>
</ul>
<h2 id="其他命令"><a href="#其他命令" class="headerlink" title="其他命令"></a>其他命令</h2><ul>
<li>卸载原有的CocoaPod:<br><code>sudo gem uninstall cocoapods</code></li>
<li>重新安装cocoapod:<br><code>sudo gem install -n /usr/local/bin cocoapods</code></li>
</ul>
<h2 id="常见问题"><a href="#常见问题" class="headerlink" title="常见问题"></a>常见问题</h2><ol>
<li>卡在Updating local specs repositories:<strong>pod install</strong>被墙了，请大家换成:<br> <code>pod install --verbose --no-repo-update</code><br> <code>pod update --verbose --no-repo-update</code></li>
<li><p>出现这种警告:</p>
<pre><code>Your Podfile has had smart quotes sanitised. To avoid issues in the future, you should not use TextEdit for editing it. If you are not using TextEdit, you should turn off smart quotes in your editor of choice.
</code></pre></li>
</ol>
<ul>
<li><strong>解决方法</strong>:不要使用文本编辑去编辑Podfile，使用Xcode编辑，或者使用终端敲命令去编辑。或者输入格式错误，没输入运行版本：<code>$platform:ios, ‘8.0‘</code></li>
</ul>
<ol>
<li>使用cocoapods导入第三方类库后头文件没有代码提示<strong>解决方法</strong>:<br> 选择Target -&gt; Build Settings 菜单，找到<code>User Header Search Paths</code>设置项，新增一个值<strong>${SRCROOT}</strong>，并且选择<strong>Recursive</strong></li>
<li><code>pod setup</code> 报<strong>CocoaPods was not able to update the <code>master</code> repo</strong> 错误<strong>解决方法</strong><ul>
<li>先删除全局的缓存：<br> <code>$ sudo rm -fr ~/Library/Caches/CocoaPods/</code><br>  <code>$ sudo rm -fr ~/.cocoapods/repos/master/</code></li>
<li>还不行的话就把当前 Pods 目录清空：<br> <code>$ sudo rm -fr Pods/</code></li>
<li>再执行<br><code>$ sudo gem install cocoapods</code></li>
<li>重新执行<br><code>$ pod setup</code></li>
</ul>
</li>
</ol>

        
      
    </div>

    

    

  </article>

    
      
  <article class="post">
    <header class="post-header">
      <h1 class="post-title">
        
          <a class="post-link" href="/2016/03/18/多线程/">多线程</a>
        
      </h1>

      <div class="post-meta">
        <span class="post-time">
          2016-03-18
        </span>
        
          <div class="post-category">
            
              <a href="/category/iOS/">iOS</a>
            
          </div>
        
        
      </div>
    </header>

    
    

    <div class="post-content">
      
        
        

        
          <figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">异步函数+主队列    不会开线程,串行执行</div><div class="line">异步函数+并发队列  开多条线程,并发执行</div><div class="line">异步函数+串行队列  开一条线程,串行执行</div><div class="line">同步函数+并发队列  不会开线程,串行执行</div><div class="line">同步函数+串行执行  不会开线程,串行执行</div></pre></td></tr></table></figure>
<h2 id="一、容易混淆的俗语"><a href="#一、容易混淆的俗语" class="headerlink" title="一、容易混淆的俗语"></a>一、容易混淆的俗语</h2><p>　　有四个术语比较容易混淆：<code>同步</code>、<code>异步</code>、<code>并发</code>、<code>串行</code>.</p>
<ol>
<li>同步和异步主要影响有:能不能开启新线程</li>
</ol>
<ul>
<li>同步: 只能在当前线程中执行任务, 不具备开启新线程的能力</li>
<li>异步: 可以在新的线程中执行任务, 具备开启新线程的能力</li>
</ul>
<ol>
<li>并发金和串行的只要影响: 任务的执行方式</li>
</ol>
<ul>
<li>并发: 允许多个任务并发(同事执行)</li>
<li>串行: 一个任务执行完毕后,在执行下一个任务</li>
</ul>
<h2 id="二、执行任务"><a href="#二、执行任务" class="headerlink" title="二、执行任务"></a>二、执行任务</h2><p> 1、GCD中有2个用来执行任务的常用函数<br>     　用同步的方式执行任务<br> 　    <code>dispatch_sync(dispatch_queue_t queue, dispatch_block_t block);</code><br>        　• queue  队列<br>        　• block  任务<br>    　用异步的方式执行任务<br>    　<code>dispatch_async(dispatch_queue_t queue, dispatch_block_t block);</code><br> 2、GCD中还有个用来执行任务的函数：<br> 　　<code>dispatch_barrier_async(dispatch_queue_t queue, dispatch_block_t block);</code><br> 　　在前面的任务执行结束后它才执行，而且它后面的任务执行完成后才会执行<br>    <strong>注意</strong>：这个<code>queue</code>不能是全局的并发列队</p>
<h2 id="三、列队的类型"><a href="#三、列队的类型" class="headerlink" title="三、列队的类型"></a>三、列队的类型</h2><p> 1、并发列队<br>    　　可以让并发任务并发(同时)执行(自动开启多个线程同时执行任务)<br>    　　并发功能只有在异步(<code>dispatch_async</code>) 函数下才有效<br>    使用 <code>dispatch_queue_create</code> 函数创建队列<br>    ​<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t </div><div class="line">dispatch_queue_create(const char *label, //队列名称</div><div class="line">dispatch_queue_attr_t attr); //队列的类型</div><div class="line">dispatch_queue_t queue = dispatch_queue_create(&quot;re.yuxiang&quot;,  DISPATCH_QUEUE_CONCURRENT); //  创建并发队列</div><div class="line">​</div></pre></td></tr></table></figure></p>
<p>GCD默认已经提供了全局的并发队列,供整个应用使用, 可以无需受用创建<br>使用<code>dispatch_get_global_queue</code>函数获得全局的并发队列<br>    ​<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">dispatch_queue_t dispatch_get_global_queue(</div><div class="line">dispatch_queue_priority_t priority, //队列的优先级</div><div class="line">long flags); //此参数暂时无用 用0即可</div><div class="line">dispatch_queue_t queue = dispatch_get_global_queue(DISPATCH_QUEUE_PRIORITY_DEFAULT, 0); //获得全局并发队列</div><div class="line">​</div></pre></td></tr></table></figure></p>
<ul>
<li>全局并发队列的优先级<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">#define DISPATCH_QUEUE_PRIORITY_HIGH 2     // 高</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_DEFAULT 0  //默认(中)</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_LOW (-2)   // 低</div><div class="line">#define DISPATCH_QUEUE_PRIORITY_BACKGROUND INT16_MIN // 后台</div></pre></td></tr></table></figure>
</li>
</ul>
<p>2、串行列队<br>　　让任务一个接着一个执行(一个任务执行完毕后,在执行下一个任务)<br>　　GCD中获得串行有2种途径<br>        使用<code>dispatch_queue_creat</code>函数创建串行队列</p>
<pre><code>dispatch_queue_creat queue = dispatch_queue_creat(&quot;yuxiang.ren&quot;, NULL); // 队列类型传递NULL或者DISPATCH_QUEUE_SERIAL 
</code></pre><p>3、主队列(跟主线程相关联的队列)<br>　　主队列是GCD自带的一种特殊的串行队列<br>　　放在主队列中的任务, 都会返回主线程中执行<br>　　使用<code>dispatch_get_main_queue()</code>获得主队列</p>
<blockquote>
<p><code>dispatch_queue_t queue = dispatch_get_main_queue();</code></p>
</blockquote>
<h2 id="四、NSOperation"><a href="#四、NSOperation" class="headerlink" title="四、NSOperation"></a>四、NSOperation</h2><ol>
<li>相关概念<br>NSOperation是对<strong>GCD的包装</strong><br>两个核心概念[<strong>队列</strong>+<strong>操作</strong>]</li>
<li>基本使用<br>  <code>NSOperation</code>本身是抽象类,只能只有他的子类<pre><code>三个子类分别是:`NSBlockOperation`,`NSInvocationOperation`,以及自定义继承自`NSOperation`的类
</code></pre><code>NSOperation</code>和<code>NSOperationQueue</code>结合使用实现多线程开发<ol>
<li><code>NSoperationQueue</code></li>
</ol>
<ul>
<li><code>NSOperation</code>中的两种队列  </li>
</ul>
</li>
</ol>
<ul>
<li>主队列: 通过mainQueue获得,凡是放到主队列中的人物都将在主线程中完成</li>
<li>非主队列: 直接[alloc init]出来的队列, 非主队列同时具备了并发和串行的功能, 通过设置最大并发数属性来控制任务是并发执行还是串行执行</li>
</ul>
<h2 id="五、GCD和NSOperation的对比"><a href="#五、GCD和NSOperation的对比" class="headerlink" title="五、GCD和NSOperation的对比"></a>五、GCD和NSOperation的对比</h2><ol>
<li><strong>GCD</strong>和<strong>NSOperation</strong>的区别</li>
</ol>
<ul>
<li><code>GCD</code>是<strong>纯C语言的API</strong>，而<code>操作队列</code>则是<strong>OC对象</strong></li>
<li>在GCD中,任务用快(<code>block</code>)来表示, 而块是轻量级的数据结构;相反操作队列中的[操作]<code>NSOperation</code>则是个更加重量级的OC对象</li>
<li>具体该使用<code>GCD</code>还是使用<code>NSOperation</code>需要看具体情况</li>
</ul>
<ol>
<li><code>NSOperation</code>和<code>NSoperationQueue</code>相对<code>GCD</code>的好处</li>
</ol>
<ul>
<li><code>NSOperationQueue</code>可以方便的调用<code>cancel</code>方法来取消某个操作, 而<strong>GCD</strong>中的任务是无法取消的</li>
<li><code>NSOperation</code>可以方便的制定操作间的依赖关系</li>
<li><code>NSOperation</code>可以通<strong>KVO</strong>提供对<code>NSOperation</code>对象的精细控制(比如监听当前的操作是否取消)</li>
<li><code>NSOperation</code>可以方便的制定操作的优先级,操作优先级表示此操作与队列中其他操作间的优先关系</li>
<li>通过自定义<code>NSOperation</code>的子类可以实现操作重用</li>
</ul>
<h2 id="六、单例"><a href="#六、单例" class="headerlink" title="六、单例"></a>六、单例</h2><ol>
<li>基本概念</li>
</ol>
<ul>
<li>单利模式<br> 在程序运行过程中,一个类只有一个实例</li>
<li>使用场合<br> 在整个应用程序中,功效一份资源(这份资源只需要创建初始化一次)</li>
</ul>
<ol>
<li>ARC实现单利<ul>
<li>在类的内部提供一个<code>static</code>修饰的全局变量</li>
<li>提供一个类方法, 方便外接访问</li>
<li>重写<code>+allocWithZone</code>方法,保证永远只为单例对象分配一次内存空间</li>
<li>严谨写法, 重写<code>-CopyWithZone</code>方法和<code>-MutableCopyWithZone</code>方法</li>
</ul>
</li>
</ol>
<p>​    </p>

        
      
    </div>

    

    

  </article>

    
  </section>

  
  <nav class="pagination">
    
      <a class="prev" href="/page/4/">
        <i class="iconfont icon-left"></i>
        <span class="prev-text">上一页</span>
      </a>
    
    
  </nav>


          </div>
          

        </div>
      </main>

      <footer id="footer" class="footer">

  <div class="social-links">
    
      
        
          <a href="mailto:mail@yuxiang.ren" class="iconfont icon-email" title="email"></a>
        
      
    
      
    
      
        
          <a href="https://twitter.com/shlyren" class="iconfont icon-twitter" title="twitter"></a>
        
      
    
      
        
          <a href="https://facebook.com/shlyren" class="iconfont icon-facebook" title="facebook"></a>
        
      
    
      
    
      
    
      
        
          <a href="https://github.com/shlyren" class="iconfont icon-github" title="github"></a>
        
      
    
      
        
          <a href="https://weibo.com/shlyjen" class="iconfont icon-weibo" title="weibo"></a>
        
      
    
      
    
      
    
      
    
      
    
      
    
    
    
  </div>


<div class="copyright">
  <span class="copyright-year">
    
    &copy; 
     
      2016 - 
    
    2018
    <a class='theme-link' href='mailto:mail@yuxiang.ren', target='_blank', style='color:#939393'>任玉祥</a>
    | 在Github上查看网站
    <a class="theme-link" href='https://github.com/shlyren/shlyren.github.io', target='_blank', style='color:#939393'>源码</a>。
     <script type="text/javascript" src="https://s95.cnzz.com/z_stat.php?id=1259844339&web_id=1259844339"></script> 
  </span>
  <span class="theme-info">

    <a href="http://www.miitbeian.gov.cn" target="_blank" style="display:inline-block;height:20px;line-height:20px;">
    <p style="float:left;margin: 0px 0px 0px 5px; color:#939393;"> 浙ICP备17016497号-1</p>
    </a> | 

  <a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010602008160" target="_blank" style="display:inline-block;line-height:20px;">
    <img src="//renyuxiang.oss-cn-shanghai.aliyuncs.com/file/beian.png" style="float:left;">
    <p style="float:left;margin: 0px 0px 0px 5px; color:#939393;">浙公网安备 33010602008160号</p>
  </a>
  </span>

  
</div>

      </footer>

      <div class="back-to-top" id="back-to-top">
        <i class="iconfont icon-up"></i>
      </div>
    </div>

    


    
  





  
    <script type="text/javascript" src="/lib/jquery/jquery-3.1.1.min.js"></script>
  

  
    <script type="text/javascript" src="/lib/slideout/slideout.js"></script>
  

  
    <script type="text/javascript" src="/lib/fancybox/jquery.fancybox.pack.js"></script>
  


    <script type="text/javascript" src="/js/src/even.js?v=2.6.0"></script>
<script type="text/javascript" src="/js/src/bootstrap.js?v=2.6.0"></script>

  </body>
</html>
